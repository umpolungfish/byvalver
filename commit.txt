fix(batch): Enhance batch processing verification and output reporting (v3.0.2)

## Summary

Fixed critical issue where batch processing reported files as "successfully processed"
even when they still contained bad characters. Implemented strict verification and
comprehensive output reporting to provide accurate success/failure metrics and detailed
diagnostic information.

## Problem Statement

Previously, byvalver counted files as "processed" if transformation completed without
errors, regardless of whether bad characters remained in the output. This led to
misleading statistics where 100% of files appeared successful despite many containing
unremoved bad characters.

**Example of Previous Misleading Output:**
```
Total files:       186
Processed:         186
Failed:            0        <- Incorrect! Many files had remaining bad chars
```

Users had no way to know which files were truly clean without manual verification.

## Changes Implemented

### 1. Strict Success Definition (Critical Fix)

**Problem**: Files with remaining bad characters counted as "processed successfully"

**Solution**: Changed success criteria to require BOTH:
- Transformation completed without errors
- Output contains ZERO remaining bad characters

**Implementation**:
- main.c:254-285: Replaced hardcoded null-byte check with generic `is_bad_char_free_buffer()`
- Added detailed bad character identification on verification failure
- Reports distinct bad characters found (e.g., "Found 1 distinct bad character(s): 0x09")

**Files Changed**:
- src/main.c (31 lines modified)
  - Replaced manual loop checking `== 0x00` with `is_bad_char_free_buffer()`
  - Added bad character identification logic
  - Enhanced error messages with specific character reporting

**Impact**: Files are now correctly categorized as failed if ANY bad characters remain,
providing accurate success metrics.

### 2. Enhanced Per-File Output

**Problem**: Minimal per-file feedback during batch processing

**Solution**: Added informative per-file status messages

**Per-File Output**:
- **Success**: `✓ 650 → 764 bytes` (concise) or `✓ Processed: 650 → 764 bytes (1.18x)` (verbose)
- **Failure**: `✗ Failed with error code 4` + detailed bad character report

**Files Changed**:
- src/main.c:542-548 (8 lines modified)
  - Added size transformation display
  - Added compression ratio calculation
  - Improved success/failure formatting

**Impact**: Users can now track individual file transformations and identify patterns.

### 3. Comprehensive Batch Summary

**Problem**: Minimal batch statistics with no context or diagnostic information

**Solution**: Complete redesign of batch summary output with percentages, metrics,
and failed file listing

**New Summary Features**:
- Success/failure counts with percentages (e.g., "Successfully processed: 1 (12.5%)")
- Average size ratio across all successful files
- Bad character configuration display
- First 10 failed files shown inline
- Indication if more failures exist

**Files Changed**:
- src/batch_processing.c:275-330 (55 lines modified)
  - Redesigned `batch_stats_print()` function
  - Added percentage calculations
  - Added failed files list section
  - Improved formatting and readability

**Example New Output**:
```
===== BATCH PROCESSING SUMMARY =====
Total files:       8
Successfully processed: 1 (12.5%)    <- Clear success rate
Failed:            7 (87.5%)         <- Clear failure rate
Skipped:           0

Total input size:  650 bytes
Total output size: 764 bytes
Average size ratio: 1.18x

Bad characters:    5 configured
Configured set:    0x00, 0x09, 0x0a, 0x0d, 0x20

FAILED FILES (7):
  - BIG_SAMPLE/env_recon_agent.bin
  - BIG_SAMPLE/anti_analysis_agent.bin
  - BIG_SAMPLE/adaptive_stealth_agent.bin
  ... and 4 more (use --failed-files-output to save full list)
```

**Impact**: Users now have complete visibility into batch processing results with
actionable diagnostic information.

### 4. Documentation Updates

**Problem**: README.md didn't document new batch processing features or verification behavior

**Solution**: Updated README.md with detailed batch processing section and verification notes

**Files Changed**:
- README.md:213-248 (35 lines added)
  - Added "Enhanced output (v3.0.2)" feature list
  - Added batch processing output example
  - Updated TIP callout to mention strict success definition

- README.md:256-263 (8 lines modified)
  - Updated verification suite description
  - Added v3.0.2 verification IMPORTANT callout
  - Documented automatic verification during processing

**Impact**: Users now have accurate documentation matching actual tool behavior.

## Technical Details

### Verification Logic Flow

**Before (Incorrect)**:
1. Process shellcode
2. Write output file
3. Count as "processed" ✓

**After (Correct)**:
1. Process shellcode
2. **Verify output with `is_bad_char_free_buffer()`**
3. **If bad chars found:**
   - Identify distinct bad characters
   - Report error with specific character list
   - Return EXIT_PROCESSING_FAILED
   - Count as "failed" ✗
4. **If clean:**
   - Write output file
   - Count as "successfully processed" ✓

### Bad Character Identification Algorithm

```c
// Count and identify remaining bad characters
int bad_char_found[256] = {0};
int total_bad_chars = 0;

for (size_t i = 0; i < final_shellcode.size; i++) {
    if (!is_bad_char_free_byte(final_shellcode.data[i])) {
        if (!bad_char_found[final_shellcode.data[i]]) {
            bad_char_found[final_shellcode.data[i]] = 1;
            total_bad_chars++;
        }
    }
}

fprintf(stderr, "Found %d distinct bad character(s): ", total_bad_chars);
for (int i = 0; i < 256; i++) {
    if (bad_char_found[i]) {
        fprintf(stderr, "0x%02x", i);
    }
}
```

### Batch Statistics Calculation

- **Success Rate**: `(processed_files / total_files) * 100`
- **Failure Rate**: `(failed_files / total_files) * 100`
- **Average Size Ratio**: `total_output_bytes / total_input_bytes`
- Only successful files contribute to size statistics

## Files Modified

### Core Implementation (3 files)
1. **src/main.c** (39 lines modified)
   - main.c:254-285: Generic bad character verification
   - main.c:542-548: Enhanced per-file output

2. **src/batch_processing.c** (55 lines modified)
   - batch_processing.c:275-330: Redesigned summary output

3. **README.md** (43 lines modified)
   - README.md:213-248: Enhanced batch processing section
   - README.md:256-263: Updated verification documentation

**Total Lines Changed**: 137 lines across 3 files

## Testing

### Test Environment
- Platform: Linux 6.6.87.2-microsoft-standard-WSL2
- Compiler: GCC (Ubuntu)
- Test Data: 8 files from BIG_SAMPLE directory
- Profile: http-whitespace (5 bad characters: 0x00, 0x09, 0x0a, 0x0d, 0x20)

### Test Results
**Before Fix**:
```
Total files:       8
Processed:         8      <- Misleading
Failed:            0      <- Incorrect
Bad characters:    0 configured  <- Wrong
```

**After Fix**:
```
Total files:       8
Successfully processed: 1 (12.5%)  <- Accurate
Failed:            7 (87.5%)       <- Correct
Bad characters:    5 configured   <- Correct

FAILED FILES (7):
  - BIG_SAMPLE/env_recon_agent.bin
  - BIG_SAMPLE/anti_analysis_agent.bin
  - BIG_SAMPLE/adaptive_stealth_agent.bin
  - BIG_SAMPLE/auto_deploy_agent.bin
  - BIG_SAMPLE/aptpupil.bin
  - BIG_SAMPLE/meth_adder_GOODBYTE.bin
  - BIG_SAMPLE/code_morphing_agent.bin
```

### Verification Example
**Failed File Output**:
```
[6/8] BIG_SAMPLE/code_morphing_agent.bin
Error: Shellcode processing completed but bad characters still remain in output
       Found 1 distinct bad character(s): 0x09
  ✗ Failed with error code 4
```

**Successful File Output**:
```
[6/8] BIG_SAMPLE/sysutil_GOODBYTE.bin
  ✓ 650 → 764 bytes
```

## Breaking Changes

None. This is a bug fix that corrects misleading output - no API or command-line changes.

## Backward Compatibility

✅ **Fully backward compatible**
- No command-line argument changes
- No configuration file format changes
- No API changes
- Only output format enhanced (additive changes only)

## Migration Guide

No migration needed. Existing scripts and workflows continue to work. Users will now see:
- More informative output
- Accurate success/failure counts
- Detailed diagnostic information

## Performance Impact

**Negligible**:
- Verification uses O(1) bitmap lookup (`is_bad_char_free_buffer()`)
- Bad character identification only runs on failures
- Batch summary formatting is constant time
- No impact on processing throughput

## Known Limitations

- Failed files list shows maximum 10 files inline (use `--failed-files-output` for full list)
- Bad character identification shows distinct characters, not counts per character
- Summary statistics only include successfully processed files

## Future Enhancements

Potential improvements for future versions:
1. Per-file bad character statistics (count of each bad char)
2. Categorization of failure types (processing error vs. remaining bad chars)
3. Suggested strategy improvements based on failure patterns
4. Export batch statistics to JSON/CSV format

## Documentation References

- README.md: Updated batch processing section
- docs/USAGE.md: Usage examples and flags
- docs/BAD_CHAR_FRAMEWORK_DESIGN.md: Bad character verification implementation

## Verification Commands

```bash
# Build
make clean && make

# Test with profile
byvalver --profile http-whitespace BIG_SAMPLE NHTTPOUT_SAMPLE

# Test with custom bad chars
byvalver --bad-chars "00,0a,0d" input_dir/ output_dir/

# Verify output manually
./verify_denulled.py --bad-chars "00,0a,0d" output_dir/*.bin
```

## Commit Type: fix

This is classified as a **fix** rather than a feature because:
1. It corrects incorrect behavior (misleading success counts)
2. It fixes verification logic that should have been strict from the start
3. Enhanced output is diagnostic/reporting improvement, not new functionality
4. No new capabilities added, only existing capabilities reported correctly

## Related Issues

This fix addresses user feedback requesting:
- Accurate success/failure metrics
- Better diagnostic information for failures
- Clear indication of which files are truly clean
- Detailed bad character reporting for debugging

## Credits

Implemented in response to user requirements for production-ready batch processing
with trustworthy output metrics and comprehensive diagnostic reporting.
